<head>
  <title>ships</title> 
  <link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
</head>

<body>

<div id="main">

	<h1>Ships Game!</h1>
	{{> player}}
    {{#if currentUser}}
      {{> controls}}
      {{> chat}}
      {{> planets}}
      {{> barracks}}
      {{> soldierview}}
      <div class="sidebar">
        {{> ship}}
        {{> mysoldiers}}
      </div>
      {{> challenge}}
      {{> battle}}
    {{else}}
        <p>You must be logged in to play.</p>
    {{/if}}
</div>
{{> starfield}}
</body>

<template name="starfield">
{{#constant}}
  <div class="starfield"></div>
{{/constant}}
</template>

<template name="controls">
{{#if show}}
<div id="controls">
  <a class="soldiertoggle button">Hide Soldiers</a>
</div>
{{/if}}
</template>

<template name="planets">
{{#if show }}
<p>Choose a planet:
  <select id="planetSelect">
  	<option value="">-- Select --</option>
  	{{#each planets}}
  	<option value="{{name}}">{{name}}</option>
  	{{/each}}
  </select>
</p>
{{/if}}
</template>

<template name="player">
<div id="account">
    {{#if currentUser}}
        Logged in as <strong>{{username}}</strong> (<a href="" id="logoutButton">Log out</a>)
    {{else}}
        {{loginButtons align="right"}}
    {{/if}}	
</div>
</template>

<template name="ship">
<div id="ship">
  <h3>Resources</h3>
  <div class="resources">
      <div class="resource">
        <img src="/images/rRed.png" />
        <p>{{player.rRed}}</p>
      </div>
      <div class="resource">
        <img src="/images/rBlue.png" />
        <p>{{player.rBlue}}</p>
      </div>
      <div class="resource">
        <img src="/images/rGreen.png" />
        <p>{{player.rGreen}}</p>
      </div>
      <div class="resource">
        <img src="/images/rWhite.png" />
        <p>{{player.rWhite}}</p>
      </div>
      <div class="resource">
        <img src="/images/rBlack.png" />
        <p>{{player.rBlack}}</p>
      </div>
  </div>
  <h3 class="fuel">Fuel</h3>
  <div class="progressbar">
  	<div class="progress" style="width:{{fuelPercent}}%">&nbsp;</div>
  </div>
  <p class="progressText">{{player.fuel}}/2000</p>
  <br class="clear" />
</div>
</template>

<template name="barracks">
<div id="barracks">
	<p>The follow soldiers are available for hire:</p>
	{{#each soldiers}}
		<div class="soldier">
    <p class="soldierStats">
  		Name: {{name}}<br />
  		Rating: {{rating}}<br />
      Exp: {{exp}}<br />
      Agility: {{agility}}<br />
      Concentration: {{concentration}}<br />
      Health: {{health}}<br />
      Wisdom: {{wisdom}}<br />
    </p>
    <a href="" class="hireButton button" id="{{_id}}"> Hire <a>
		</div>
    
	{{/each}}
</div>
</template>

<template name="chat">
  {{#if show}}
  <div id="chat">
  <span>{{online}} users online</span>
  <div class="chats">
    {{#each chats}}
      <p>{{name}}: {{message}}</p>
    {{/each}}
  </div>
  <input type="text" id="chatinput" />
  </div>
  {{else}}
  <div id="chatSmall">
    <p>Press ~ to expand console</p>
  </div>
  {{/if}}
</template>

<template name="mysoldiers">
{{#if show}}
<div id="mysoldiers">
  <h3>Your Soldiers</h3>
  <ul>
  {{#each soldiers}}
    <li class="soldier {{#if levelup}}highlight{{/if}}">
      Name: {{name}}
      <br />
      HP: {{hp}}/{{maxhp}}
      <br />
      Level: {{level}}
      <br />
      Needed: {{next}}
      <br />
      Action: {{action}}
    </li>
  {{/each}}
  </ul>
</div>
{{/if}}
</template>

<template name="soldierview">
  {{#if show}}
    <div id="soldierview">
      <h2>{{soldier.name}}</h2>
      <div class="soldierlevel">
        Level {{soldier.level}}
      </div>
      <div class="actionselect">
        {{#if noaction}}
          {{#each actions}}
          <label class="{{actionselected}}">
            {{.}}
            <input type="radio" name="actionselect" value="{{.}}" {{#isChecked}} checked{{/isChecked}}/>
          </label>
          {{/each}}
        {{else}}
          <p>{{soldier.name}} is currently {{soldier.action}} <a class="button recall-button">Recall</a></p>
        {{/if}}
      </div>
      <div class="soldierhp">
        <p>Hitpoints: {{soldier.hp}} / {{soldier.maxhp}}</p>
        <p>Rating: {{rating}}</p>
      </div>
      <div class="soldierexp">
      Exp: {{soldier.exp}}
      <br />
      To Next: {{tonext}}
      </div>
      <h3>Stats</h3>
      <ul>
        <li>
          Agility: {{soldier.agility}}
          {{#if hascp}}
            <a class="addagility" href="#">+</a>
          {{/if}}
        </li>
        <li>
          Concentration: {{soldier.concentration}}
          {{#if hascp}}
            <a class="addconcentration" href="#">+</a>
          {{/if}}
        </li>        
        <li>
          Health: {{soldier.health}}
          {{#if hascp}}
            <a class="addhealth" href="#">+</a>
          {{/if}}
        </li>
        <li>
          Wisdom: {{soldier.wisdom}}
          {{#if hascp}}
            <a class="addwisdom" href="#">+</a>
          {{/if}}
        </li>
      </ul>
      <p>Character Points: {{soldier.cp}}</p>
      <span class="fire button"> Fire </span>
      <span class="levelup button"> Level Up </span>
    </div>
  {{/if}}
</template>

<template name="challenge">
{{#if show}}
  <div class="challenge">
  <h3>Start a fight!</h3>
  {{#each users_online}}
    <p>{{username}} <a class="challenge-user">Fight</a></p>
  {{/each}}
  </div>
{{/if}}
</template>

<template name="battle">
  {{#if show}}
    <div class="battle">
    {{#if challenger}}
      <h3>Battle</h3>
      <p>Waiting for opponent to respond {{battle_id._id}}</p>
    {{else}}
      <h3>Challenge!</h3>
      <p>{{player1}} has challenged you to a fight!</p>
      <p class="button"> Accept </p>
      <p class="button"> Decline </p>
    {{/if}}
    </div>
  {{/if}}
</template>